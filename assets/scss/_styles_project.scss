////////////////////////////////////////////////////////////////////////
//                              SOLUTION                              //
////////////////////////////////////////////////////////////////////////
body.dark-mode .markmap {
  color: #fff;
  font-weight: 450;
}

body.dark-mode .solution-btn {
  color: #bbbbbb;
}

body.dark-mode .solution-btn:hover,
body.dark-mode .solution-btn:focus {
  color: #ffffff;
}

body.dark-mode .solution-detail {
  background-color: #1e2a35;
  color: #d0d7de;
  border-color: #3b5164;
}

body.dark-mode .solution-detail strong {
  color: #80bfff;
}

body.eyecare-mode .solution-btn {
  color: #746b2b;
}

body.eyecare-mode .solution-btn:hover,
body.eyecare-mode .solution-btn:focus {
  color: #5a5218;
}

body.eyecare-mode .solution-detail {
  background-color: #f8f4cc;
  color: #4b4411;
  border-color: #d8c77d;
}

body.eyecare-mode .solution-detail strong {
  color: #a67900;
}

////////////////////////////////////////////////////////////////////////
//                               CHOICE                               //
////////////////////////////////////////////////////////////////////////
body.dark-mode .choice-container {
  background-color: #2b2b2b;
  border-color: #444;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  color: #e0e0e0;
}

body.dark-mode .choice-option {
  background-color: #3a3a3a;
  border-color: #555;
  color: #e0e0e0;
}

body.dark-mode .choice-option:hover {
  background-color: #33475b;
  border-color: #66b0ff;
}

body.dark-mode .choice-label {
  color: #66b0ff;
}

body.dark-mode .choice-text {
  color: #ddd;
}

body.dark-mode .choice-text code {
  background-color: #444;
  color: #f78c6c;
}

body.dark-mode .toggle-btn {
  color: #bbbbbb;
}

body.dark-mode .toggle-btn:hover,
body.dark-mode .toggle-btn:focus {
  color: #ffffff;
}

body.dark-mode .explanation {
  background-color: #1e2a35;
  color: #cdd5df;
  border-color: #3b5164;
}

body.dark-mode .explanation strong {
  color: #80bfff;
}

body.dark-mode .explanation .correct-answer-text {
  color: #48d69f;
}

body.dark-mode .feedback-area.correct {
  background-color: #234d38;
  color: #c3f3d8;
  border-color: #3ea785;
}

body.dark-mode .feedback-area.incorrect {
  background-color: #552222;
  color: #f7bcbc;
  border-color: #cc6666;
}

body.eyecare-mode .choice-container {
  background-color: #fffde7;
  border-color: #e2d6ab;
  box-shadow: 0 4px 12px rgba(180, 150, 50, 0.1);
  color: #3e3b1a;
}

body.eyecare-mode .choice-option {
  background-color: #faf4d3;
  border-color: #e0d4aa;
  color: #3e3b1a;
}

body.eyecare-mode .choice-option:hover {
  background-color: #f3ecc2;
  border-color: #c8a600;
}

body.eyecare-mode .choice-label {
  color: #c59a00;
}

body.eyecare-mode .choice-text {
  color: #4b4411;
}

body.eyecare-mode .choice-text code {
  background-color: #f6f1d1;
  color: #8c5a10;
}

body.eyecare-mode .toggle-btn {
  color: #746b2b;
}

body.eyecare-mode .toggle-btn:hover,
body.eyecare-mode .toggle-btn:focus {
  color: #5a5218;
}

body.eyecare-mode .explanation {
  background-color: #f8f4cc;
  color: #4b4411;
  border-color: #d8c77d;
}

body.eyecare-mode .explanation strong {
  color: #a67900;
}

body.eyecare-mode .explanation .correct-answer-text {
  color: #228c22;
}

body.eyecare-mode .feedback-area.correct {
  background-color: #e5f4dc;
  color: #2e652e;
  border-color: #9bd49b;
}

body.eyecare-mode .feedback-area.incorrect {
  background-color: #ffe6e6;
  color: #972323;
  border-color: #ef9999;
}

body.dark-mode .choice-option-inline {
  background-color: #3a3a3a;
  border-color: #555;
  color: #e0e0e0;
}

body.dark-mode .choice-option-inline:hover {
  background-color: #33475b;
  border-color: #66b0ff;
}

body.dark-mode .choice-label {
  color: #66b0ff;
}

body.dark-mode .choice-option-inline input[type="radio"] {
  accent-color: #66b0ff;
}

body.eyecare-mode .choice-option-inline {
  background-color: #faf4d3;
  border-color: #e0d4aa;
  color: #3e3b1a;
}

body.eyecare-mode .choice-option-inline:hover {
  background-color: #f3ecc2;
  border-color: #c8a600;
}

body.eyecare-mode .choice-label {
  color: #c59a00;
}

body.eyecare-mode .choice-option-inline input[type="radio"] {
  accent-color: #c59a00;
}

////////////////////////////////////////////////////////////////////////
//                              REGION                               //
////////////////////////////////////////////////////////////////////////
/* Eyecare Mode */
.eyecare-mode .region {
    background-color: #fefce8 !important; /* light yellow */
    color: #3b3a30;
}
.eyecare-mode .region-info {
    background-color: #fffde7;
    color: #4d4d4d;
}
.eyecare-mode .region-tip {
    background-color: #f4f9ec;
    color: #2e5d3f;
}
.eyecare-mode .region-note {
    background-color: #f6fbfe;
    color: #205060;
}
.eyecare-mode .region-warn {
    background-color: #fffbe8;
    color: #855d00;
}
.eyecare-mode .region-danger {
    background-color: #fff3f4;
    color: #992a30;
}

/* Dark Mode */
.dark-mode .region {
    background-color: #1e1e1e;
    color: #dcdcdc;
    box-shadow: none;
}
.dark-mode .region-info {
    border-left-color: #6c6c6c;
    background-color: #2a2a2a;
    color: #c0c0c0;
}
.dark-mode .region-tip {
    border-left-color: #66bb6a;
    background-color: #1f2f1f;
    color: #a5d6a7;
}
.dark-mode .region-note {
    border-left-color: #4fc3f7;
    background-color: #1e2a33;
    color: #b3e5fc;
}
.dark-mode .region-warn {
    border-left-color: #ffca28;
    background-color: #2d2600;
    color: #ffe082;
}
.dark-mode .region-danger {
    border-left-color: #ef5350;
    background-color: #2e1a1b;
    color: #ef9a9a;
}

////////////////////////////////////////////////////////////////////////
//                              DETAILS                               //
////////////////////////////////////////////////////////////////////////
body.dark-mode .elegant-detail {
    border-color: #4a4a4a;
    background-color: #333333;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

body.dark-mode .elegant-detail:hover {
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

body.dark-mode .elegant-summary {
    background-color: #3f3f3f;
    color: #e0e0e0;
}

body.dark-mode .elegant-summary:hover {
    background-color: #4a4a4a;
}

body.dark-mode .elegant-summary::after {
    color: #66bfff; /* Lighter blue for dark mode icon */
}

body.dark-mode .elegant-detail-content {
    background-color: #333333; /* Match detail background */
    color: #dcdcdc;
}

body.eyecare-mode .elegant-detail {
    border-color: #e2d6ab;
    background-color: #fffde7;
    box-shadow: 0 2px 10px rgba(180, 150, 50, 0.1);
}

body.eyecare-mode .elegant-detail:hover {
    box-shadow: 0 4px 15px rgba(180, 150, 50, 0.2);
}

body.eyecare-mode .elegant-summary {
    background-color: #faf4d3;
    color: #4e4a1d;
}

body.eyecare-mode .elegant-summary:hover {
    background-color: #f3ecc2;
}

body.eyecare-mode .elegant-summary::after {
    color: #c59a00; /* Warm gold accent for icon */
}

body.eyecare-mode .elegant-detail-content {
    background-color: #fffde7;
    color: #3e3b1a;
}

////////////////////////////////////////////////////////////////////////
//                            TOC settings                            //
////////////////////////////////////////////////////////////////////////
.td-toc a {
    display: block;
    font-weight: 400;
    padding-bottom: 0.4rem;
    font-size: 0.9rem;
    color: #2c3e50;
    transition: color 0.3s ease, transform 0.2s ease;
}

.td-toc a:hover {
  color: #007bff;
  transform: translateX(4px);
}

.td-toc a::before {
    background: #b9bdc5;
    border-radius: "50%";
    content: "";
    float: left;
    height: 6px;
    margin: 7px 8px 0 0;
    width: 6px;
    transition: background 0.3s ease;
}

.td-toc a:hover::before {
    background: #007bff;
}

.td-toc ul ul {
    padding-left: 0.8em;
}

.img-container img {
    padding-bottom: 1em;
}

.svg-container svg {
    vertical-align: middle;
    height: auto;
    font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        Oxygen,
        Ubuntu,
        Cantarell,
        "Open Sans",
        "Helvetica Neue",
        sans-serif;
    padding-bottom: 1em;
    max-width: 80%;
    width: 80%;
    font {
        font-family:
            system-ui,
            -apple-system,
            BlinkMacSystemFont,
            "Segoe UI",
            Roboto,
            Oxygen,
            Ubuntu,
            Cantarell,
            "Open Sans",
            "Helvetica Neue",
            sans-serif;
    }
}

body.dark-mode .svg-container {
    b,
    font {
        color: white;
    }
    div[data-drawio-colors] div {
        color: white !important;
    }
    .mermaid {
        text.messageText {
            fill: white !important;
        }
        line {
            stroke: white !important;
        }
    }
}

@media (max-width: 768px) and (hover: none) {
  .svg-container {
    width: 100% !important;
  }

  .svg-container svg {
    width: 100% !important;
    max-width: 100% !important;
    height: auto;
  }
}


.markmap > svg {
    width: 100%;
    height: 600px;
}

.lead {
    font-size: 1rem;
    font-weight: 500;
    color: gray;
}

////////////////////////////////////////////////////////////////////////
//                               NAVBAR                               //
////////////////////////////////////////////////////////////////////////
.nav-tabs .nav-link {
  color: grey;
}

.navbar-nav .nav-link.active,
.navbar-nav .nav-link.show {
    color: #1a73e8;
    text-decoration: none;
    border-bottom: 2px solid #1a73e8;
    transition: border-color 0.3s ease;
}

.navbar-nav .nav-link {
    color: white;
    transition: color 0.3s ease;
}

.navbar-nav .nav-link:hover {
    color: #007bff;
}

.navbar-brand {
    color: #a8cbf7;
    font-weight: 600;
    font-size: 1.25rem;
}

.dark-mode .navbar-nav .nav-link {
    color: #cccccc; /* Light gray for inactive links */
}

.dark-mode .navbar-nav .nav-link.active,
.dark-mode .navbar-nav .nav-link.show {
    color: #66b0ff;
    border-bottom: 2px solid #66b0ff;
}

// Search bar and non-root URL styling
.non-root-url {
    background: linear-gradient(180deg, #ffffff, #f8f9fa);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    .td-search__input {
        border: 1px solid #ced4da;
        color: #495057;
        border-radius: 6px;
        padding: 0.5rem 1rem;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .td-search__input:focus {
        border-color: #007bff;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
    }
    .navbar-brand {
        color: #1a73e8;
    }
    .navbar-brand:hover {
        color: #4a8cf0;
    }
    .nav-link {
      color: #2c3e50;
    }
}

.eyecare-mode .non-root-url {
    background: linear-gradient(180deg, #ffffe6, #fff5cc);
}

.dark-mode .non-root-url {
    background: linear-gradient(180deg, #343a40, #2c3136);
}

div#hide-sidebar-div {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    padding-top: 1rem;
    height: 2rem;
    width: 100%;
}

.td-sidebar-nav {
  font-size: 0.9em;
  font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", "Helvetica Neue", Arial, sans-serif;
}

.td-sidebar {
    padding-bottom: 5.2rem;
}

.td-footer {
    min-height: 130px;
}

aside#show-sidebar-col {
    display: none;
    position: relative;
    width: 10%;
    top: 0;
    right: 0;
}

div#show-sidebar-left {
    flex: 1;
}

div#show-sidebar-right {
    flex: 3;
}

i#show-sidebar-icon {
    cursor: pointer;
    position: sticky;
    top: 50%;
    transform: translateY(-50%);
}

aside#show-toolbar-col {
    display: none;
    position: relative;
    width: 10%;
}

div#show-toolbar-left {
    flex: 3;
}

div#show-toolbar-right {
    flex: 1;
}

i#show-toolbar-icon {
    cursor: pointer;
    position: sticky;
    top: 50%;
    transform: translateY(-50%);
}

.eyecare-mode {
  background-color: #fdfbe7;  /* 柔和米黄色背景 */
  color: #4a4a4a;              /* 深灰色字体，提高对比度 */

  .nav-tabs .nav-link.active,
  .nav-tabs .nav-item.show .nav-link {
    background-color: #f7f1c6; /* 柔和亮黄 */
    border-color: #e0dcb3;
    color: #333333;
  }

  .taxonomy-term {
    background-color: #fff4cf;
    color: #5a5a5a;
    border-radius: 4px;
    padding: 4px 8px;
  }

  .taxonomy-count {
    background-color: #f9f5d7;
    color: #6b6b6b;
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 90%;
  }

  .breadcrumb-item {
    color: #7a723d;
  }

  a {
    color: #a07e00;
  }

  a:hover,
  a:focus {
    color: #8a6f00;
    text-decoration: underline;
  }
}

.dark-mode {
  background-color: #1e1e1e;
  color: #dcdcdc;
}

.dark-mode a {
  color: #4dabf7; /* 柔和蓝色链接 */
}

.dark-mode #hide-toolbar {
  color: #4dabf7 !important;
}

.dark-mode .alert {
  background-color: #2c2c2c;
  border-left: 4px solid #4dabf7;
  color: #e0e0e0;
}

.dark-mode tr {
  color: #e8e8e8;
}

.dark-mode .table-striped > tbody > tr:nth-of-type(odd) > *,
.dark-mode .td-table:not(.td-initial) > tbody > tr:nth-of-type(odd) > *,
.dark-mode .td-content table:not(.td-initial) > tbody > tr:nth-of-type(odd) > *,
.dark-mode .td-box table:not(.td-initial) > tbody > tr:nth-of-type(odd) > * {
  --bs-table-accent-bg: #2a2a2a;
  background-color: var(--bs-table-accent-bg);
  color: #e0e0e0;
}

.dark-mode .td-sidebar-nav .td-sidebar-link__page {
  color: #eeeeee;
  font-weight: 400;
}

.dark-mode .td-sidebar-nav__section-title a {
  color: #8ce99a;
  font-weight: 500;
}

.dark-mode .td-toc #TableOfContents a {
  color: #cccccc;
}

.dark-mode .td-content pre {
  background-color: #2b2b2b;
  color: #f1f1f1;
  padding: 1rem;
  border-radius: 4px;
  overflow-wrap: break-word;
}

.dark-mode .nav-tabs .nav-link.active,
.dark-mode .nav-tabs .nav-item.show .nav-link {
  color: #ffffff;
  background-color: #2e3b4e;
  border-color: #4dabf7;
}

.dark-mode .taxonomy-term {
  background-color: #3a3a3a;
  color: #f0f0f0;
}

.dark-mode .taxonomy-count {
  background-color: #555;
  color: #e0e0e0;
}

.dark-mode .taxonomy-title {
  color: #4dabf7;
}

.dark-mode .pageinfo {
  background-color: #2d2d2d;
  color: #dcdcdc;
}

.dark-mode .breadcrumb-item {
  color: #aaaaaa;
}

.td-sidebar {
    visibility: hidden;
}

.td-sidebar-toc {
    visibility: hidden;
}

.td-sidebar-link.tree-root {
    display: none;
}

.custom-detail {
    margin: 15px 0;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 10px;
    background-color: #f9f9f9;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.custom-summary {
    font-weight: bold;
    cursor: pointer;
    margin: -10px -10px 10px -10px;
    padding: 10px;
    background-color: #007acc;
    color: #fff;
    border-radius: 5px 5px 0 0;
}

.custom-summary:hover {
    background-color: #005a99;
}

.custom-detail-content {
    background-color: #ffffff;
    padding: 10px;
    border-radius: 0 0 5px 5px;
}

@media only screen and (max-device-width: 820px) {
    .tab-content .tab-pane {
        margin-top: 0rem;
        margin-bottom: 1.5rem;
        max-width: 100%;
        border-left: 1px solid rgba(0, 0, 0, 0.125);
        border-right: 1px solid rgba(0, 0, 0, 0.125);
        border-bottom: 1px solid rgba(0, 0, 0, 0.125);
    }
    .svg-container, .img-container {
      max-width: 100%;
    }
}

// remain some space for displaying hide sidebar button
@media (min-width: 768px) {
    @supports (position: sticky) {
        .td-sidebar-nav {
            max-height: calc(98vh - 10rem);
            overflow-y: auto;
        }
    }
}

@media (min-width: 768px) {
    @supports (position: sticky) {
        .td-sidebar-toc {
            position: sticky;
            top: 4rem;
            height: calc(100vh - 4rem);
            overflow-y: auto;
        }
    }

    .d-xl-block {
        display: block !important;
    }

    .col-xl-2 {
        flex: 0 0 auto;
        width: 16.66666667%;
    }

    .col-xl-8 {
        flex: 0 0 auto;
        width: 66.66666667%;
    }
}

@media (max-width: 767px) {
    div#hide-sidebar-div {
        display: none;
    }

    #sidebar-hr {
        display: none;
    }

    .td-404 main,
    .td-main main {
        padding-top: 0rem;
        padding-bottom: 2rem;
    }

    .td-sidebar {
        padding-bottom: 0rem;
    }
}

// ipad devices width is 90% when horizontally put
@media (min-width: 992px) {
    .td-max-width-on-larger-screens,
    .td-card.card,
    .td-card-group.card-group,
    .td-content > .tab-content .tab-pane,
    .td-content .footnotes,
    .td-content > .alert,
    .td-content > .highlight,
    .td-content > .lead,
    .td-content > .td-table,
    .td-box .td-content > table,
    .td-content > table,
    .td-content > blockquote,
    .td-content > dl dd,
    .td-content > h1,
    .td-content > .h1,
    .td-content > h2,
    .td-content > .h2,
    .td-content > ol,
    .td-content > p,
    .td-content > pre,
    .td-content > ul {
        max-width: 95%;
    }
}

// computer width is 80%
@media (min-width: 1400px) {
    .td-max-width-on-larger-screens,
    .td-card.card,
    .td-card-group.card-group,
    .td-content > .tab-content .tab-pane,
    .td-content .footnotes,
    .td-content > .alert,
    .td-content > .highlight,
    .td-content > .lead,
    .td-content > .td-table,
    .td-box .td-content > table,
    .td-content > table,
    .td-content > blockquote,
    .td-content > dl dd,
    .td-content > h1,
    .td-content > .h1,
    .td-content > h2,
    .td-content > .h2,
    .td-content > ol,
    .td-content > p,
    .td-content > pre,
    .td-content > ul {
        max-width: 80%;
    }
}
